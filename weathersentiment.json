[{id84ac3f6d.bc8ae,typeworldmap,z8c44b64f.0ed9c8,name,lat,lon,zoom,cluster,maxage5,x757.25,y199,wires[]},{id8cd4bfab.45fd7,typeinject,z8c44b64f.0ed9c8,name,topic,payloadkrakova,payloadTypestr,repeat,crontab,oncefalse,x107,y130,wires[[dae37447.619bb8,9ff8e039.01a93]]},{iddae37447.619bb8,typefunction,z8c44b64f.0ed9c8,nameAdd person to map,funcvar thing = {n    nameJason Isaacs, n    lat51, n    lon-1.45,n    iconlocate,n    iconColorblue,n    extrainfoHello to Jason Isaacsn};nmsg.payload = thing;nreturn msg;,outputs1,noerr0,x390.5,y108.75,wires[[84ac3f6d.bc8ae,91e1ccb8.58853]]},{id91e1ccb8.58853,typedebug,z8c44b64f.0ed9c8,name,activetrue,consolefalse,completefalse,x522.5,y223,wires[]},{idc5458e24.055ae,typehttp request,z8c44b64f.0ed9c8,name,methodGET,rettxt,url,tls,x406.75,y283.75,wires[[6f908b5a.d94344,dc2a10e.87ef9f]]},{id9ff8e039.01a93,typefunction,z8c44b64f.0ed9c8,name,funcmsg.url= httpnominatim.openstreetmap.orgsearchformat=json&q=+msg.payload+&zoom=18&addressdetails=1; nreturn msg;,outputs1,noerr0,x290.75,y200.75,wires[[c5458e24.055ae]]},{id6f908b5a.d94344,typefunction,z8c44b64f.0ed9c8,name,funcnvar input = JSON.parse(msg.payload);nvar lat = input[0].lat;nvar lng = input[0].lon;nvar name = input[0].address.city;nmsg.payload = {n    name name, n    lat lat, n    lonlng,n    iconhostilen};nreturn msg;,outputs1,noerr0,x595,y264,wires[[84ac3f6d.bc8ae,c249f9b0.0b9498]]},{ide283aa85.92deb8,typetwitter in,z8c44b64f.0ed9c8,twitter,tagsweather,userfalse,name,topictweets,inputs0,x69,y207,wires[[33c25877.21a278]]},{idb4d063de.032d,typefunction,z8c44b64f.0ed9c8,name,funcmsg.payload=msg.tweet.user.location;nreturn msg;,outputs1,noerr0,x282,y359,wires[[9ff8e039.01a93]]},{id33c25877.21a278,typefunction,z8c44b64f.0ed9c8,name1 sec delimiter,funcvar interval = (10005);  minimum interval between messages (ms)ncontext.lastTime = context.lastTime  0;nnvar now = Date.now();nnif (now-context.lastTime  interval) {n  return null;n} nelsen{n   context.lastTime = now;n  return msg;n}n,outputs1,noerr0,x114,y288,wires[[b4d063de.032d,330e6754.84feb8]]},{id64421c4a.7597b4,typeopenweathermap,z8c44b64f.0ed9c8,name,wtypecurrent,lon,lat,city,country,languageen,x401,y414,wires[[9304138f.55f29]]},{iddc2a10e.87ef9f,typefunction,z8c44b64f.0ed9c8,name,funcvar input = JSON.parse(msg.payload);nvar lat = input[0].lat;nvar lng = input[0].lon;nmsg.location = {n    lat lat, n    lonlngn};nreturn msg;,outputs1,noerr0,x542,y314,wires[[64421c4a.7597b4]]},{id9304138f.55f29,typefunction,z8c44b64f.0ed9c8,name,funcvar detailWeather = msg.payload.detail;nvar weatherTemp = msg.payload.tempc;nglobal.set(detailWeather, detailWeather);nglobal.set(temp, weatherTemp);nreturn msg;nnmsg.payload={weathermsg.payload.detail};nreturn msg;,outputs1,noerr0,x550,y380,wires[[c249f9b0.0b9498]]},{id330e6754.84feb8,typesentiment,z8c44b64f.0ed9c8,name,x156,y423,wires[[5a888dff.1c2134]]},{id5a888dff.1c2134,typefunction,z8c44b64f.0ed9c8,name,funcvar sentimentScore = msg.sentiment.score;nglobal.set(sentimentScore, sentimentScore);nreturn msg;nnnmsg.payload = msg.sentiment.score;nreturn msg;,outputs1,noerr0,x450,y492,wires[[c249f9b0.0b9498]]},{idc249f9b0.0b9498,typefunction,z8c44b64f.0ed9c8,name,funcvar name = msg.payload.name;nvar lat = msg.payload.lat;nvar lon = msg.payload.lon;nvar sentimentScore = global.get(sentimentScore);nvar detailWeather = global.get(detailWeather);nvar temp = global.get(temp);nnmsg.payload = { n            name name, n            latlat, n            lonlon, n            sentimentScoresentimentScore,n            weather detailWeather,n            temptempn        };nreturn msg;,outputs1,noerr0,x761,y365,wires[[54c04c5c.c0c1b4,9cca3e8e.822c7]]},{id54c04c5c.c0c1b4,typedebug,z8c44b64f.0ed9c8,name,activetrue,consolefalse,completefalse,x1026,y418,wires[]},{id9cca3e8e.822c7,typecloudant out,z8c44b64f.0ed9c8,name,cloudant,databasesentimentweather,serviceantitesti-cloudantNoSQLDB,payonlytrue,operationinsert,x856,y295,wires[]}]